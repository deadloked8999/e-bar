# Инструкция по установке и запуску E-Bar

## Требования

- Python 3.9 или выше
- Node.js 18 или выше
- npm или yarn

## Установка

### Шаг 1: Установка Backend (Python)

1. Откройте терминал и перейдите в папку проекта:
```bash
cd ebar
```

2. Перейдите в папку backend:
```bash
cd backend
```

3. Создайте виртуальное окружение:
```bash
python -m venv venv
```

4. Активируйте виртуальное окружение:

**Windows:**
```bash
venv\Scripts\activate
```

**Linux/Mac:**
```bash
source venv/bin/activate
```

5. Установите зависимости:
```bash
pip install -r requirements.txt
```

6. Проверьте, что файл `.env` создан в папке backend

### Шаг 2: Установка Frontend (React)

1. Откройте **новый терминал** (не закрывая первый)

2. Перейдите в папку frontend:
```bash
cd ebar/frontend
```

3. Установите зависимости:
```bash
npm install
```

## Запуск приложения

### Запуск Backend

1. В первом терминале (в папке backend с активированным venv):
```bash
python main.py
```

Вы должны увидеть:
```
INFO:     Uvicorn running on http://0.0.0.0:8000
INFO:     Application startup complete.
```

Backend API будет доступно:
- API: http://localhost:8000
- Документация: http://localhost:8000/docs

### Запуск Frontend

2. Во втором терминале (в папке frontend):
```bash
npm run dev
```

Вы должны увидеть:
```
  VITE v5.x.x  ready in xxx ms

  ➜  Local:   http://localhost:5173/
```

Откройте браузер и перейдите по адресу: **http://localhost:5173**

## Проверка работы

1. Откройте http://localhost:5173 в браузере
2. Вы должны увидеть главную страницу E-Bar с интерфейсом загрузки документов
3. Попробуйте загрузить тестовый документ:
   - Выберите блок документов
   - Выберите тип документа
   - Перетащите файл или нажмите для выбора

## Устранение проблем

### Backend не запускается

**Ошибка: "python не является внутренней командой"**
- Убедитесь, что Python установлен: `python --version`
- Попробуйте использовать `python3` вместо `python`

**Ошибка: "No module named 'fastapi'"**
- Убедитесь, что виртуальное окружение активировано (должно быть `(venv)` в начале строки терминала)
- Переустановите зависимости: `pip install -r requirements.txt`

**Порт 8000 уже занят**
- Измените порт в файле `backend/.env`: `PORT=8001`
- Перезапустите backend

### Frontend не запускается

**Ошибка: "npm не является внутренней командой"**
- Убедитесь, что Node.js установлен: `node --version`
- Установите Node.js с официального сайта: https://nodejs.org/

**Ошибка при установке зависимостей**
- Удалите папку `node_modules` и файл `package-lock.json`
- Запустите снова: `npm install`

**Порт 5173 уже занят**
- Vite автоматически выберет другой свободный порт (5174, 5175, и т.д.)

### CORS ошибки

Если вы видите ошибки CORS в консоли браузера:
1. Убедитесь, что backend запущен на порту 8000
2. Убедитесь, что frontend запущен на порту 5173
3. Проверьте настройки CORS в `backend/main.py`

## Структура проекта после установки

```
ebar/
├── backend/
│   ├── venv/              # Виртуальное окружение Python
│   ├── uploads/           # Папка для загруженных файлов (создается автоматически)
│   ├── main.py            # Главный файл backend
│   ├── requirements.txt   # Зависимости Python
│   └── .env              # Конфигурация
├── frontend/
│   ├── node_modules/      # Зависимости Node.js
│   ├── src/              # Исходный код React
│   ├── package.json      # Конфигурация Node.js
│   └── vite.config.ts    # Конфигурация Vite
└── README.md             # Документация
```

## Остановка приложения

1. Backend: Нажмите `Ctrl+C` в терминале с backend
2. Frontend: Нажмите `Ctrl+C` в терминале с frontend

## Следующие шаги

После успешного запуска вы можете:
1. Загружать документы через веб-интерфейс
2. Проверять документы (принимать/отклонять)
3. Просматривать статистику
4. Изучить API документацию: http://localhost:8000/docs

